## requirements
* Matlab v>=12.0
* [Anaconda platform](https://www.continuum.io/downloads)
  - Python 3.5
    * Regardless of what version of Anaconda you installed, you can create a conda environment with the right version of Python.
    See [the Conda docs](http://conda.pydata.org/docs/py2or3.html#install-a-different-version-of-python) for instructions.
  - Jupyter v>=12.0
* A copy of this repository: either download a zip of it with the button in the upper right, or clone it with Git.

## how to use
1. Label at least 40 songs by hand for the individual Bengalese Finch's song that you want autolabeled.
**Important: *You must assign some label to every class of syllable.* If you don't, the classifier will not know that class exists, and it will try to classify it as some other label instead. For example, if you do not want to label 'introductory syllables', you should at least make sure they all have the same default label such as '-' or '0', because if you don't then the classifier will think there is more than one class of syllable. *You should also whenever possible choose segmenting parameters that give you the most consistent segments without adjusting the onsets and offsets by hand.* The classifier uses segment durations as one of the features that it uses to assign labels to syllables, so if a syllable is often mis-segmented, it will be more likely to get mis-classified.**
2. In Matlab:
 * If you haven't already, add the 'hybrid-deep-finch/matlab' folder to the Matlab Path
 * Navigate to a directory containing data from one bird.
 The scripts assume that each sub-directory/folder in that directory contains one day worth of song.
 * Run the following: 
 ```matlab
 >> train_deepfinch
 ```
 This script will prompt you to select the directories that contain song labeled by hand. It will then loop through each sub-directory and create feature files from the hand-labeled songs.  The feature files are used to to train the machine learning algorithms that produce classifiers. A new sub-directory will be made in whatever directory you are in when you execute the script and it will contain the features files output by the script.
3. Start an Anaconda Prompt (you can find this under All Programs > Anaconda)
 * Navigate to the directory where you have a local copy of this repository by typing the following command then hitting Enter. Replace "Documents\hybrid-deep-finch\" with whatever you named the directory if you changed the name.
 ```
 C:\Users\you1> cd Documents\hybrid-deep-finch\
 ```
 ("cd" stands for "change to directory")
 * Start the Jupyter notebook server by entering "jupyter notebook" then hitting Enter.
 ```
 C:\Users\you1\Documents\hybrid-deep-finch\> jupyter notebook
 ```
 * The notebook dashboard will open in your web browser.
 * On the first page you'll see a Jupyter notebook titled 'hybrid-deep-finch'.
 Double click the title to open it, and then follow the directions in the notebook to run the algorithm testing script.
 The script will compare the accuracy of k-Nearest Neighbors algorithm and Support Vector Machine Radial Basis Function
trained on the data you labeled by hand.
  * Once the script in this notebook finishes running (it takes a while, probably overnight), you will have an estimate of training error for classifiers trained with different amounts of hand-labeled song, and you will have files for each classifier generated by the script. You will select one of these files for the computer to use when it classifies the unlabeled syllables.
4. Go back to Matlab:
  * Navigate to the directory of songs from the bird you plan to label.
  * Run the following: 
 ```matlab
 >> classify_deepfinch
 ```
 * Again, the script will prompt you to select directories, but this time you want to select directories containing song you want the computer to label. These can be the same directories where you have hand-labeled song. This time the script will loop through the directories selected, create files that contain labeling data, and then extract features using those files.
  + Note that there is a separate file type for automatically-generated labeling data, 'HDF.not.mat'
  + To view these files in our GUI for labeling song, you check the "Use HDF.not.mat file" checkbox in the GUI.
 
